# 6. 단위테스트 스타일

* 출력 : 가장 단순
* 상태 : 작업 완료 후 상태점검 (sut,협력자,DB,file 등)
* 통신

* 고전파:mock최소화 → 상태기반을 선호

* 회귀방지,빠른피드백: 차이없음
* 리펙토링내성: 테스트와 제품코드간 결합도 높을수록 안좋음
  *  출력기반 → 상태기반 → 통신기반 ..점점 결합도 높아짐
* 유지보수성: 테스트코드도 이해쉬어야함 + 외부종속 적어야함
  * 출력기반 → 상태기반 → 통신기반 ..수정 내용도 알아야하고 변경량도 많음

* 결론: 출력 기반 스타일 사용 최대화 → 함수형 아키텍쳐 (순수 함수 방식으로 작성)


### 함수형 프로그래밍
* 순수함수 (메서드시그니쳐:이름,인수,반환타입)
* 숨은 입출력없음
  * 부작용 (메서드 시그니처에 없는거, DB,파일 입출력,예외 등)
  * 내외부 참조 (현재시간,DB조회)
* 호출 횟수와 상관없이 입출력

* 참조투명성: 메소드 호출은 반환값으로 대체 가능

* 목표: 부작용 제거X → 함수형코어(비지니스)와 가변셀(부작용) 분리

* 함수형 아키텍쳐는 육각형 아키텍쳐의 하위

* 단점
  * 함수형 적용 가능? 실행 복잡 / 중간에 외부데이터 사용시 / 모든데이터 준비 시 성능저하
    * -> lazy eval 사용하면?
  * 코드베이스 증가
